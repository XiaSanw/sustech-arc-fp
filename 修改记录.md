# ä¿®æ”¹è®°å½•

## 01 - ä»»åŠ¡2.3 æŠ—å¹²æ‰°é²æ£’æ€§è®­ç»ƒé…ç½®ï¼ˆ2026-01-07ï¼‰

### é—®é¢˜ç°è±¡
- ä½¿ç”¨ä¹‹å‰è®­ç»ƒçš„æ¨¡å‹æµ‹è¯•ä»»åŠ¡2.3æ—¶ï¼Œæœºå™¨äººä¸€è¢«æ–½åŠ å¤–åŠ›å°±å…¨éƒ¨å¿«é€Ÿè·Œå€’é£å‡ºå»
- æ¨¡å‹å®Œå…¨æ²¡æœ‰æŠ—å¹²æ‰°èƒ½åŠ›

### æ ¹æœ¬åŸå› 
1. è®­ç»ƒæ—¶å¤–åŠ›é…ç½®ä¸è¶³ï¼š
   - å¤–åŠ›é—´éš” `interval_range_s=(5.0, 10.0)` å¤ªé•¿
   - è§¦å‘æ¦‚ç‡ `probability=0.3` å¤ªä½
   - å®é™…è®­ç»ƒä¸­å¾ˆå°‘è¢«æ¨ï¼Œæ²¡æœ‰å­¦ä¼šæŠ—å¹²æ‰°

2. å¥–åŠ±æƒé‡é…ç½®é—®é¢˜ï¼š
   - é€Ÿåº¦è·Ÿè¸ªæƒé‡è¿‡é«˜ï¼ˆ`rew_lin_vel_xy=8.0`ï¼‰ï¼Œè¢«æ¨æ—¶ä»ç›²ç›®è¿½é€Ÿåº¦
   - å§¿æ€ç¨³å®šæƒé‡ä¸è¶³ï¼Œæ²¡æœ‰ä¼˜å…ˆæ¢å¤å¹³è¡¡çš„æ¿€åŠ±

### è§£å†³æ–¹æ¡ˆï¼šé’ˆå¯¹ä»»åŠ¡2.3çš„ä¸“é—¨è®­ç»ƒé…ç½®

#### æ–‡ä»¶ä½ç½®
`exts/bipedal_locomotion/bipedal_locomotion/tasks/locomotion/cfg/PF/limx_base_env_cfg.py`

#### æ ¸å¿ƒä¿®æ”¹ç­–ç•¥
- âœ… é™ä½é€Ÿåº¦è·Ÿè¸ªæƒé‡ï¼ˆè¢«æ¨æ—¶ä¼˜å…ˆå¹³è¡¡ï¼Œè€Œéè¿½é€Ÿåº¦ï¼‰
- âœ… å¼ºåŒ–å§¿æ€ç¨³å®šæ€§æƒ©ç½š
- âœ… å…è®¸å¿«é€Ÿååº”ï¼ˆé™ä½åŠ¨ä½œå¹³æ»‘æ€§çº¦æŸï¼‰
- âœ… è®­ç»ƒæ—¶é¢‘ç¹æ–½åŠ å¼ºå¤–åŠ›
- âœ… æŠ˜ä¸­å¤„ç† `pen_feet_distance`ï¼ˆé˜²æ­¢è®­ç»ƒå´©æºƒï¼‰

---

### å…·ä½“é…ç½®ä¿®æ”¹

#### 1. å¥–åŠ±æƒé‡è°ƒæ•´ï¼ˆRewardsCfgç±»ï¼‰

##### é€Ÿåº¦è·Ÿè¸ªï¼ˆé™ä½ä¼˜å…ˆçº§ï¼‰
```python
rew_lin_vel_xy = RewTerm(
    func=mdp.track_lin_vel_xy_exp,
    weight=4.0,  # ä» 8.0 â†’ 4.0
    params={"command_name": "base_velocity", "std": math.sqrt(0.2)}
)

rew_ang_vel_z = RewTerm(
    func=mdp.track_ang_vel_z_exp,
    weight=2.0,  # ä» 4.0 â†’ 2.0
    params={"command_name": "base_velocity", "std": math.sqrt(0.2)}
)
```

##### å§¿æ€ç¨³å®šæ€§ï¼ˆå¼ºåŒ–æ§åˆ¶ï¼‰
```python
pen_flat_orientation = RewTerm(
    func=mdp.flat_orientation_l2,
    weight=-15.0  # ä» -10.0 â†’ -15.0ï¼Œå¼ºåŒ–å§¿æ€æ§åˆ¶
)

pen_ang_vel_xy = RewTerm(
    func=mdp.ang_vel_xy_l2,
    weight=-0.1  # ä» -0.05 â†’ -0.1ï¼Œé™åˆ¶roll/pitchæ—‹è½¬
)

pen_base_height = RewTerm(
    func=mdp.base_com_height,
    params={"target_height": 0.78},
    weight=-15.0,  # ä» -20.0 â†’ -15.0ï¼ˆé€‚ä¸­ï¼‰
)
```

##### å…è®¸å¿«é€Ÿååº”
```python
pen_action_rate = RewTerm(
    func=mdp.action_rate_l2,
    weight=-0.002  # ä» -0.005 â†’ -0.002ï¼Œå…è®¸æ¿€è¿›åŠ¨ä½œ
)

pen_action_smoothness = RewTerm(
    func=mdp.ActionSmoothnessPenalty,
    weight=-0.002  # ä» -0.005 â†’ -0.002
)
```

##### å…³é”®ä¿®æ”¹ï¼šé˜²æ­¢è®­ç»ƒå´©æºƒ
```python
pen_feet_distance = RewTerm(
    func=mdp.feet_distance,
    weight=-10.0,  # ä» -100 â†’ -10.0ï¼ˆæŠ˜ä¸­æ–¹æ¡ˆï¼‰
    params={
        "min_feet_distance": 0.115,
        "feet_links_name": ["foot_[RL]_Link"]
    }
)
```

##### å…¶ä»–æƒ©ç½šï¼ˆé€‚ä¸­è°ƒæ•´ï¼‰
```python
pen_lin_vel_z = RewTerm(func=mdp.lin_vel_z_l2, weight=-0.5)
pen_joint_torque = RewTerm(func=mdp.joint_torques_l2, weight=-0.00006)
pen_joint_accel = RewTerm(func=mdp.joint_acc_l2, weight=-1.5e-07)
pen_joint_pos_limits = RewTerm(func=mdp.joint_pos_limits, weight=-1.5)
pen_joint_vel_l2 = RewTerm(func=mdp.joint_vel_l2, weight=-8e-04)
pen_joint_powers = RewTerm(func=mdp.joint_powers_l1, weight=-3e-04)
pen_undesired_contacts = RewTerm(func=mdp.undesired_contacts, weight=-0.4, params={...})
pen_feet_regulation = RewTerm(func=mdp.feet_regulation, weight=-0.08, params={...})
foot_landing_vel = RewTerm(func=mdp.foot_landing_vel, weight=-0.4, params={...})
```

---

#### 2. å¤–åŠ›é…ç½®è°ƒæ•´ï¼ˆEventsCfgç±»ï¼‰

```python
push_robot = EventTerm(
    func=mdp.apply_external_force_torque_stochastic,
    mode="interval",
    interval_range_s=(4.0, 6.0),  # ä» (5.0, 10.0) â†’ (4.0, 6.0)ï¼Œæ›´é¢‘ç¹
    params={
        "asset_cfg": SceneEntityCfg("robot", body_names="base_Link"),
        "force_range": {
            "x": (-700.0, 700.0),  # ä» 600 â†’ 700N
            "y": (-700.0, 700.0),
            "z": (-0.0, 0.0),
        },
        "torque_range": {
            "x": (-70.0, 70.0),   # ä» 60 â†’ 70Nâ‹…m
            "y": (-70.0, 70.0),
            "z": (-0.0, 0.0)
        },
        "probability": 0.5,  # ä» 0.3 â†’ 0.5ï¼Œæ›´é¢‘ç¹æ–½åŠ å¤–åŠ›
    },
    is_global_time=False,
    min_step_count_between_reset=0,
)
```

---

### é…ç½®å¯¹æ¯”æ€»ç»“

| é¡¹ç›® | åŸé…ç½® | ä»»åŠ¡2.3é…ç½® | è¯´æ˜ |
|------|--------|------------|------|
| `rew_lin_vel_xy` | 8.0 | **4.0** | é™ä½é€Ÿåº¦è·Ÿè¸ªä¼˜å…ˆçº§ |
| `rew_ang_vel_z` | 4.0 | **2.0** | åŒä¸Š |
| `pen_flat_orientation` | -10.0 | **-15.0** | â­ å¼ºåŒ–å§¿æ€ç¨³å®š |
| `pen_ang_vel_xy` | -0.05 | **-0.1** | â­ é™åˆ¶ç¿»æ»š |
| `pen_base_height` | -20.0 | **-15.0** | é€‚ä¸­è°ƒæ•´ |
| `pen_feet_distance` | -100 | **-10.0** | ğŸ”¥ é˜²æ­¢è®­ç»ƒå´©æºƒ |
| `pen_action_rate` | -0.005 | **-0.002** | å…è®¸å¿«é€Ÿååº” |
| `pen_action_smoothness` | -0.005 | **-0.002** | åŒä¸Š |
| `push_robot.interval` | (5,10)s | **(4,6)s** | æ›´é¢‘ç¹æ¨åŠ› |
| `push_robot.probability` | 0.3 | **0.5** | æé«˜è§¦å‘ç‡ |
| `push_robot.force` | 600N | **700N** | å¢å¼ºå¤–åŠ› |

---

### è®­ç»ƒå»ºè®®

1. **æ¸…ç†æ—§æ—¥å¿—**
   ```bash
   rm -rf logs/rsl_rl/pf_tron_1a_flat/
   ```

2. **é‡æ–°è®­ç»ƒ**ï¼ˆè‡³å°‘5000è¿­ä»£ï¼‰
   ```bash
   python scripts/rsl_rl/train.py \
       --task Isaac-Limx-PF-Blind-Flat-v0 \
       --headless \
       --num_envs 4096
   ```

3. **ç›‘æ§æŒ‡æ ‡**
   - Episode Rewardï¼šåº”åœ¨ 0-15 èŒƒå›´å†…æ³¢åŠ¨
   - æœºå™¨äººè¡Œä¸ºï¼šè¢«æ¨åèƒ½å¿«é€Ÿè°ƒæ•´å§¿æ€ï¼Œå…è®¸æš‚æ—¶åç¦»é€Ÿåº¦æŒ‡ä»¤
   - è®­ç»ƒæ—¶é•¿ï¼šå»ºè®® 5000-8000 è¿­ä»£

4. **æµ‹è¯•æŠ—å¹²æ‰°**
   ```bash
   python scripts/rsl_rl/play.py \
       --task Isaac-Limx-PF-Blind-Flat-Demo-v0 \
       --num_envs 4 \
       --video \
       --video_length 1000
   ```

---

### é¢„æœŸæ•ˆæœ

- âœ… æœºå™¨äººè¢«æ¨åèƒ½å¿«é€Ÿæ¢å¤å¹³è¡¡ï¼Œä¸ä¼šç«‹å³æ‘”å€’
- âœ… è®­ç»ƒæ›²çº¿å¹³ç¨³ï¼Œä¸ä¼šåœ¨2000+è¿­ä»£å´©æºƒ
- âœ… åœ¨ä¿æŒä¸€å®šé€Ÿåº¦è·Ÿè¸ªèƒ½åŠ›çš„åŒæ—¶ï¼Œä¼˜å…ˆä¿è¯å§¿æ€ç¨³å®šæ€§
- âœ… æ‰¿å—å¤–åŠ›èƒ½åŠ›ï¼šç›®æ ‡ â‰¥700N ç¬æ—¶æ¨åŠ›

---

### åç»­ä¼˜åŒ–æ–¹å‘

å¦‚æœè®­ç»ƒç¨³å®šåä»éœ€æå‡æ€§èƒ½ï¼š
1. é€æ­¥å¢åŠ  `pen_flat_orientation` åˆ° -20.0
2. å¢åŠ å¤–åŠ›åˆ° 800-1000N
3. æé«˜å¤–åŠ›è§¦å‘æ¦‚ç‡åˆ° 0.6-0.7
